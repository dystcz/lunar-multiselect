(()=>{"use strict";var e={148:(e,t)=>{function n(e){return function(e){if(Array.isArray(e))return i(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return{model:e.model,searchable:e.searchable,multiselect:e.multiselect,readonly:e.readonly,disabled:e.disabled,placeholder:e.placeholder,optionValue:e.optionValue,optionLabel:e.optionLabel,popover:!1,search:"",selectedOptions:[],init:function(){var e=this;this.initMultiSelect(),this.$watch("popover",(function(t){t&&e.$nextTick((function(){var t;return null===(t=e.$refs.search)||void 0===t?void 0:t.focus()}))})),this.$watch("model",(function(t){return e.syncSelected(t)})),this.$watch("search",(function(t){return e.filterOptions(null==t?void 0:t.toLowerCase())}))},togglePopover:function(){this.readonly||this.disabled||(this.popover=!this.popover,this.$refs.select.dispatchEvent(new Event(this.popover?"open":"close")))},closePopover:function(){this.popover=!1,this.$refs.select.dispatchEvent(new Event("close"))},isSelected:function(e){var t;return this.multiselect?!!Object.values(null!==(t=this.model)&&void 0!==t?t:[]).find((function(t){return t==e})):e==this.model},unSelect:function(e){if(!this.disabled&&!this.readonly){var t=this.selectedOptions.findIndex((function(t){return t.value==e}));this.selectedOptions.splice(t,1),t=this.model.findIndex((function(t){return t==e})),this.model.splice(t,1),this.$refs.select.dispatchEvent(new Event("select"))}},select:function(e){if(!this.disabled&&!this.readonly){if(this.search="",this.multiselect){if(this.model=Object.assign([],this.model),~this.model.findIndex((function(t){return t==e})))return this.unSelect(e);var t=this.getOptionElement(e).dataset;return this.$refs.select.dispatchEvent(new Event("select")),this.selectedOptions.push(t),this.model.push(e)}e===this.model&&(e=null),this.model=e,this.$refs.select.dispatchEvent(new Event("select")),this.closePopover()}},clearModel:function(){var e=this.multiselect?[]:null;this.model=e,this.selectedOptions=[],this.$refs.select.dispatchEvent(new Event("clear"))},isEmptyModel:function(){var e;return this.multiselect?0===(null===(e=this.model)||void 0===e?void 0:e.length):null==this.model},getOptionElement:function(e){return this.$refs.optionsContainer.querySelector("[data-value='".concat(e,"']"))},getPlaceholderText:function(){var e;return(null===(e=this.model)||void 0===e?void 0:e.toString().length)?null:this.placeholder},getValueText:function(){var e;return this.multiselect||!(null===(e=this.model)||void 0===e?void 0:e.toString().length)?null:this.decodeSpecialChars(this.getOptionElement(this.model).dataset.label)},isAvailableInList:function(e,t){var n=this.decodeSpecialChars(t.dataset.label),i=this.decodeSpecialChars(t.dataset.value);return n.toLowerCase().includes(e)||i.toLowerCase().includes(e)},filterOptions:function(e){var t=this;n(this.$refs.optionsContainer.children).map((function(n){t.isAvailableInList(e.toLowerCase(),n)?n.classList.remove("hidden"):n.classList.add("hidden")}))},initMultiSelect:function(){var e,t=this;this.multiselect&&("string"==typeof this.model&&(this.model=[]),null===(e=this.model)||void 0===e||e.map((function(e){var n=t.getOptionElement(e).dataset;t.selectedOptions.push(n)})))},modelWasChanged:function(){var e;return(null===(e=this.model)||void 0===e?void 0:e.toString())!==this.selectedOptions.map((function(e){return e.value})).toString()},syncSelected:function(){var e,t,n=this;this.multiselect&&this.modelWasChanged()&&(this.selectedOptions=null!==(t=null===(e=this.model)||void 0===e?void 0:e.map((function(e){return n.getOptionElement(e).dataset})))&&void 0!==t?t:[])},decodeSpecialChars:function(e){var t=document.createElement("textarea");return t.innerHTML=e,t.value},getFocusables:function(){var e,t,i,s=null!==(t=null===(e=this.$el)||void 0===e?void 0:e.querySelectorAll("li, input"))&&void 0!==t?t:[];return s.length>0?n(s):n(null===(i=this.$root)||void 0===i?void 0:i.querySelectorAll("li, input"))},getFirstFocusable:function(){return this.getFocusables().shift()},getLastFocusable:function(){return this.getFocusables().pop()},getNextFocusable:function(){return this.getFocusables()[this.getNextFocusableIndex()]||this.getFirstFocusable()},getPrevFocusable:function(){return this.getFocusables()[this.getPrevFocusableIndex()]||this.getLastFocusable()},getNextFocusableIndex:function(){return(this.getFocusables().indexOf(document.activeElement)+1)%(this.getFocusables().length+1)},getPrevFocusableIndex:function(){return Math.max(0,this.getFocusables().indexOf(document.activeElement))-1}}}}},t={};function n(i){var s=t[i];if(void 0!==s)return s.exports;var o=t[i]={exports:{}};return e[i](o,o.exports,n),o.exports}var i;i=n(148),document.addEventListener("alpine:init",(function(){window.Alpine.data("select",i.default)}))})();