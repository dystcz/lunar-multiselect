(()=>{"use strict";var e={148:(e,t)=>{function i(e){return function(e){if(Array.isArray(e))return n(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return n(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return Array.from(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return n(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return{model:e.model,searchable:e.searchable,multiselect:e.multiselect,readonly:e.readonly,disabled:e.disabled,placeholder:e.placeholder,optionValue:e.optionValue,optionLabel:e.optionLabel,popover:!1,value:e.value,search:"",selectedOptions:[],init:function(){var e=this;this.initMultiSelect(),this.$watch("popover",(function(t){t&&e.$nextTick((function(){var t;return null===(t=e.$refs.search)||void 0===t?void 0:t.focus()}))})),this.$watch("model",(function(t){return e.syncSelected(t)})),this.$watch("search",(function(t){return e.filterOptions(null==t?void 0:t.toLowerCase())}))},togglePopover:function(){this.readonly||this.disabled||(this.popover=!this.popover,this.$refs.select.dispatchEvent(new Event(this.popover?"open":"close")))},closePopover:function(){this.popover=!1,this.$refs.select.dispatchEvent(new Event("close"))},isSelected:function(e){var t;return this.multiselect?!!Object.values(null!==(t=this.model)&&void 0!==t?t:[]).find((function(t){return t==e})):e==this.model},unSelect:function(e){if(!this.disabled&&!this.readonly){var t=this.selectedOptions.findIndex((function(t){return t.value==e}));this.selectedOptions.splice(t,1),t=this.model.findIndex((function(t){return t==e})),this.model.splice(t,1),this.$refs.select.dispatchEvent(new Event("select"))}},select:function(e){if(!this.disabled&&!this.readonly){if(this.search="",this.multiselect){if(this.model=Object.assign([],this.model),~this.model.findIndex((function(t){return t==e})))return this.unSelect(e);var t=this.getOptionElement(e).dataset;return this.$refs.select.dispatchEvent(new Event("select")),this.selectedOptions.push(t),this.model.push(e)}e===this.model&&(e=null),this.model=e,this.$refs.select.dispatchEvent(new Event("select")),this.closePopover()}},clearModel:function(){var e=this.multiselect?[]:null;this.model=e,this.selectedOptions=[],this.$refs.select.dispatchEvent(new Event("clear"))},isEmptyModel:function(){var e;return this.multiselect?0===(null===(e=this.model)||void 0===e?void 0:e.length):null==this.model},getOptionElement:function(e){return this.$refs.optionsContainer.querySelector("[data-value='".concat(e,"']"))},getPlaceholderText:function(){var e;return(null===(e=this.model)||void 0===e?void 0:e.toString().length)?null:this.placeholder},getValueText:function(){var e;return this.multiselect||!(null===(e=this.model)||void 0===e?void 0:e.toString().length)?null:this.decodeSpecialChars(this.getOptionElement(this.model).dataset.label)},isAvailableInList:function(e,t){var i=this.decodeSpecialChars(t.dataset.label),n=this.decodeSpecialChars(t.dataset.value);return i.toLowerCase().includes(e)||n.toLowerCase().includes(e)},filterOptions:function(e){var t=this;i(this.$refs.optionsContainer.children).map((function(i){t.isAvailableInList(e.toLowerCase(),i)?i.classList.remove("hidden"):i.classList.add("hidden")}))},initMultiSelect:function(){var e,t=this;this.multiselect&&("string"==typeof this.model&&(this.model=[]),this.model=this.value&&null!=this.value[0]?this.value:[],null===(e=this.model)||void 0===e||e.map((function(e){var i=t.getOptionElement(e).dataset;t.selectedOptions.push(i)})))},modelWasChanged:function(){var e;return this.value=this.model,(null===(e=this.model)||void 0===e?void 0:e.toString())!==this.selectedOptions.map((function(e){return e.value})).toString()},syncSelected:function(){var e,t,i=this;this.multiselect&&this.modelWasChanged()&&(this.selectedOptions=null!==(t=null===(e=this.model)||void 0===e?void 0:e.map((function(e){return i.getOptionElement(e).dataset})))&&void 0!==t?t:[])},decodeSpecialChars:function(e){var t=document.createElement("textarea");return t.innerHTML=e,t.value},getFocusables:function(){var e,t,n,s=null!==(t=null===(e=this.$el)||void 0===e?void 0:e.querySelectorAll("li, input"))&&void 0!==t?t:[];return s.length>0?i(s):i(null===(n=this.$root)||void 0===n?void 0:n.querySelectorAll("li, input"))},getFirstFocusable:function(){return this.getFocusables().shift()},getLastFocusable:function(){return this.getFocusables().pop()},getNextFocusable:function(){return this.getFocusables()[this.getNextFocusableIndex()]||this.getFirstFocusable()},getPrevFocusable:function(){return this.getFocusables()[this.getPrevFocusableIndex()]||this.getLastFocusable()},getNextFocusableIndex:function(){return(this.getFocusables().indexOf(document.activeElement)+1)%(this.getFocusables().length+1)},getPrevFocusableIndex:function(){return Math.max(0,this.getFocusables().indexOf(document.activeElement))-1}}}}},t={};function i(n){var s=t[n];if(void 0!==s)return s.exports;var l=t[n]={exports:{}};return e[n](l,l.exports,i),l.exports}var n;n=i(148),document.addEventListener("alpine:init",(function(){window.Alpine.data("select",n.default)}))})();